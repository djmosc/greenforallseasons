!function($){"use strict";var t={},e="ajaxPosts",n=function(t,e){this.element=t,this.ready=!1,this.nextBtn=e.nextBtn,this.page=1,this.loading=!1,this.init()},a=function(a){var r=$.extend({},t,a);return this.each(function(){var t=$(this),a=new n(t,r);t.data(e,a)})},r=function(t){t in n.prototype||$.error("Method "+t+" does not exist on jQuery.ajaxPosts");var a=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=$(this),r=n.data(e);return r?void r[t].apply(r,a):!0})},i=function(t,e,n){var a=new RegExp("(\\?|\\&)"+e+"=.*?(?=(&|$))"),r=/\?.+$/;return t=a.test(t)?t.replace(a,"$1"+e+"="+n):r.test(t)?t+"&"+e+"="+n:t+"?"+e+"="+n},o=function(t){var e=s(t),n=e.page;if(n)return n;for(var a=t.split("/"),r=0;r<a.length&&"page"!=a[r];r++);return"undefined"!=typeof a[r+1]?parseInt(a[r+1]):1},s=function(t){for(var e=[],n,a=t.slice(t.indexOf("?")+1).split("&"),r=0;r<a.length;r++)n=a[r].split("="),e.push(n[0]),e[n[0]]=n[1];return e},p=function(t,e){var n=s(t),e=parseInt(e);return t=n.page?t.replace("page="+e,"page="+(e+1)):t.replace("page/"+e,"page/"+(e+1))};n.prototype={init:function(){var t=this,e=t.nextBtn;e.text("Load More").on("click",function(e){e.preventDefault(),t.load($(this).attr("href"))})},load:function(t){var e=this,n=e.element,a=e.nextBtn,r=o(t);if(e.page!=r&&!e.loading){var s=i(t,"ajax",1);a.text("loading..."),e.loading=!0,$.ajax({url:s}).done(function(i){if(!i)return a.hide(),!1;var o=$(i);$.fn.imagesLoaded?(o.hide(),n.append(o),o.slideDown().imagesLoaded(function(){o.fadeIn()})):n.append(o),e.loading=!1,e.page=r,t=p(t,r),a.attr("href",t).text("Load More")})}},loaded:function(t){var e=t}},$.fn.ajaxPosts=function(t){return"object"!=typeof t&&t?r.apply(this,arguments):a.apply(this,arguments)}}(jQuery);